!function(t,s,n,r){t.fn.starratings=function(s){t.fn.starratings.options=t.extend({ajaxurl:null,starsurl:null,grs:!1,msg:"Rate this post",fuelspeed:400,thankyou:"Thank you for rating.",error_msg:"An error occured.",tooltip:!0,tooltips:{0:{tip:"Poor",color:"red"},1:{tip:"Fair",color:"brown"},2:{tip:"Average",color:"orange"},3:{tip:"Good",color:"blue"},4:{tip:"Excellent",color:"green"}}},t.fn.starratings.options,s||{});var r=this,a=[];return t.get(t.fn.starratings.options.starsurl,function(s){t.fn.starratings.options.stars=s;var i=n.querySelectorAll("[data-star]");r.each(function(){a.push(t(this)),0==i.length&&t.fn.starratings.animate(t(this))}),t.fn.starratings.fetch(a,0,"0%",t.fn.starratings.options.msg,!0),null!=i&&i.forEach(function(t,n){t.style.width=s[t.attributes["data-star"].value].r+"%"})}),this.each(function(){})},t.fn.starratings.animate=function(s){if(s.hasClass("disabled"))t(".sr-stars a",s).unbind("click").click(function(){return!1});else if(t.fn.starratings.options.stars){var n=t(".sr-legend",s).html(),r=t.fn.starratings.options.stars[s.attr("data-id")].r+"%";t(".sr-fuel",s).stop(!0,!0).animate({width:r},t.fn.starratings.options.fuelspeed),t(".sr-legend",s).html(n),t(".sr-stars a",s).hover(function(){if(!s.hasClass("disabled")){var r=t(this).attr("href").split("#")[1];0!=t.fn.starratings.options.tooltip&&(null!=t.fn.starratings.options.tooltips[r-1]?t(".sr-legend",s).html('<span style="color:'+t.fn.starratings.options.tooltips[r-1].color+'">'+t.fn.starratings.options.tooltips[r-1].tip+"</span>"):t(".sr-legend",s).html(n)),t(".sr-fuel",s).stop(!0,!0).css("width","0%"),t(".sr-stars a",s).each(function(n,a){var i=t(this),o=i.attr("href").split("#")[1];parseInt(o)<=parseInt(r)&&(t(".sr-stars a",s).stop(!0,!0),i.hide().addClass("sr-star").addClass("orange").fadeIn("fast"))})}},function(){s.hasClass("disabled")||(t(".sr-stars a",s).removeClass("sr-star").removeClass("orange"),0!=t.fn.starratings.options.tooltip&&t(".sr-legend",s).html(n),t(".sr-fuel",s).stop(!0,!0).animate({width:r},t.fn.starratings.options.fuelspeed))}).unbind("click").click(function(){return t.fn.starratings.click(s,t(this).attr("href").split("#")[1])})}},t.fn.starratings.update=function(s,n,r,a,i){1==a&&t(".sr-fuel",s).removeClass("yellow").addClass("orange"),t(".sr-fuel",s).stop(!0,!0).animate({width:n},t.fn.starratings.options.fuelspeed,"linear",function(){1==a&&(s.addClass("disabled"),t(".sr-stars a",s).unbind("hover")),t.fn.starratings.options.grs&&i?t.fn.starratings.animate(s):t(".sr-legend",s).stop(!0,!0).hide().html(r||t.fn.starratings.options.msg).fadeIn("slow",function(){t.fn.starratings.animate(s)})})},t.fn.starratings.click=function(s,n){t(".sr-stars a",s).unbind("hover").unbind("click").removeClass("sr-star").removeClass("orange").click(function(){return!1});var r=t(".sr-legend",s).html(),a=t(".sr-fuel",s).css("width");return t.fn.starratings.fetch(s,n,a,r,!1),!1},t.fn.starratings.fetch=function(r,a,i,o,e){if(!(s.location.href.indexOf("/musica/")<0)){var l=[];t.each(r,function(){l.push(t(this).attr("data-id"))}),t.ajax({url:t.fn.starratings.options.ajaxurl+l,data:"stars="+a,type:"post",dataType:"json",beforeSend:function(s,i){t(".sr-fuel",r).animate({width:"0%"},t.fn.starratings.options.fuelspeed),a&&t(".sr-legend",r).fadeOut("fast",function(){t(".sr-legend",r).html('<span style="color: green">'+t.fn.starratings.options.thankyou+"</span>")}).fadeIn("slow"),/^http:.*.do/.test(i.url)||/^https:.*/.test(i.url)||s.setRequestHeader("X-CSRFToken",function(t){var s=null;if(n.cookie&&""!=n.cookie)for(var r=n.cookie.split(";"),a=0;a<r.length;a++){var i=jQuery.trim(r[a]);if(i.substring(0,t.length+1)==t+"="){s=decodeURIComponent(i.substring(t.length+1));break}}return s}("csrftoken"))},success:function(s){t.each(r,function(){var n=t(this),r=n.attr("data-id");s[r]&&(s[r].success?t.fn.starratings.update(n,s[r].fuel+"%",s[r].legend,s[r].disable,e):t.fn.starratings.update(n,i,o,!1,e))})},complete:function(){},error:function(s){t(".sr-legend",r).fadeOut("fast",function(){t(".sr-legend",r).html('<span style="color: red">'+t.fn.starratings.options.error_msg+"</span>")}).fadeIn("slow",function(){t.fn.starratings.update(r,i,o,!1,e)})}})}},t.fn.starratings.options={ajaxurl:starratings_config_js.ajaxurl,starsurl:starratings_config_js.starsurl,func:starratings_config_js.func,grs:starratings_config_js.grs,tooltip:starratings_config_js.tooltip,tooltips:starratings_config_js.tooltips,msg:starratings_config_js.msg,fuelspeed:starratings_config_js.fuelspeed,thankyou:starratings_config_js.thankyou,error_msg:starratings_config_js.error_msg}}(jQuery,window,document),jQuery(document).ready(function(t){t(".star-ratings").starratings()});