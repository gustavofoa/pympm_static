!function(t,s,r,n){t.fn.starratings=function(s){t.fn.starratings.options=t.extend({ajaxurl:null,starsurl:null,grs:!1,msg:"Rate this post",fuelspeed:400,thankyou:"Thank you for rating.",error_msg:"An error occured.",tooltip:!0,tooltips:{0:{tip:"Poor",color:"red"},1:{tip:"Fair",color:"brown"},2:{tip:"Average",color:"orange"},3:{tip:"Good",color:"blue"},4:{tip:"Excellent",color:"green"}}},t.fn.starratings.options,s?s:{});var n=[];return this.each(function(){n.push(t(this)),t.fn.starratings.animate(t(this))}),t.get(t.fn.starratings.options.starsurl,function(s){t.fn.starratings.options.stars=s,t.fn.starratings.fetch(n,0,"0%",t.fn.starratings.options.msg,!0);var a=r.querySelectorAll("[data-star]");null!=a&&a.forEach(function(t,r){t.style.width=s[t.attributes["data-star"].value].r+"%"})}),this.each(function(){})},t.fn.starratings.animate=function(s){if(s.hasClass("disabled"))t(".sr-stars a",s).unbind("click").click(function(){return!1});else if(t.fn.starratings.options.stars){t("");var r=t(".sr-legend",s).html(),n=t.fn.starratings.options.stars[s.attr("data-id")].r+"%";t(".sr-fuel",s).stop(!0,!0).animate({width:n},t.fn.starratings.options.fuelspeed),t(".sr-legend",s).html(r),t(".sr-stars a",s).hover(function(){if(!s.hasClass("disabled")){var n=t(this).attr("href").split("#")[1];0!=t.fn.starratings.options.tooltip&&(null!=t.fn.starratings.options.tooltips[n-1]?t(".sr-legend",s).html('<span style="color:'+t.fn.starratings.options.tooltips[n-1].color+'">'+t.fn.starratings.options.tooltips[n-1].tip+"</span>"):t(".sr-legend",s).html(r)),t(".sr-fuel",s).stop(!0,!0).css("width","0%"),t(".sr-stars a",s).each(function(r,a){var i=t(this),o=i.attr("href").split("#")[1];parseInt(o)<=parseInt(n)&&(t(".sr-stars a",s).stop(!0,!0),i.hide().addClass("sr-star").addClass("orange").fadeIn("fast"))})}},function(){s.hasClass("disabled")||(t(".sr-stars a",s).removeClass("sr-star").removeClass("orange"),0!=t.fn.starratings.options.tooltip&&t(".sr-legend",s).html(r),t(".sr-fuel",s).stop(!0,!0).animate({width:n},t.fn.starratings.options.fuelspeed))}).unbind("click").click(function(){return t.fn.starratings.click(s,t(this).attr("href").split("#")[1])})}},t.fn.starratings.update=function(s,r,n,a,i){"true"==a&&t(".sr-fuel",s).removeClass("yellow").addClass("orange"),t(".sr-fuel",s).stop(!0,!0).animate({width:r},t.fn.starratings.options.fuelspeed,"linear",function(){"true"==a&&(s.addClass("disabled"),t(".sr-stars a",s).unbind("hover")),t.fn.starratings.options.grs&&i?t.fn.starratings.animate(s):t(".sr-legend",s).stop(!0,!0).hide().html(n?n:t.fn.starratings.options.msg).fadeIn("slow",function(){t.fn.starratings.animate(s)})})},t.fn.starratings.click=function(s,r){t(".sr-stars a",s).unbind("hover").unbind("click").removeClass("sr-star").removeClass("orange").click(function(){return!1});var n=t(".sr-legend",s).html(),a=t(".sr-fuel",s).css("width");return t.fn.starratings.fetch(s,r,a,n,!1),!1},t.fn.starratings.fetch=function(s,n,a,i,o){var e=[];t.each(s,function(){e.push(t(this).attr("data-id"))}),t.ajax({url:t.fn.starratings.options.ajaxurl,data:"id="+e+"&stars="+n,type:"post",dataType:"json",beforeSend:function(a,i){function o(t){var s=null;if(r.cookie&&""!=r.cookie)for(var n=r.cookie.split(";"),a=0;a<n.length;a++){var i=jQuery.trim(n[a]);if(i.substring(0,t.length+1)==t+"="){s=decodeURIComponent(i.substring(t.length+1));break}}return s}t(".sr-fuel",s).animate({width:"0%"},t.fn.starratings.options.fuelspeed),n&&t(".sr-legend",s).fadeOut("fast",function(){t(".sr-legend",s).html('<span style="color: green">'+t.fn.starratings.options.thankyou+"</span>")}).fadeIn("slow"),/^http:.*.do/.test(i.url)||/^https:.*/.test(i.url)||a.setRequestHeader("X-CSRFToken",o("csrftoken"))},success:function(r){t.each(s,function(){var s=t(this),n=s.attr("data-id");r[n]&&(r[n].success?t.fn.starratings.update(s,r[n].fuel+"%",r[n].legend,r[n].disable,o):t.fn.starratings.update(s,a,i,!1,o))})},complete:function(){},error:function(r){t(".sr-legend",s).fadeOut("fast",function(){t(".sr-legend",s).html('<span style="color: red">'+t.fn.starratings.options.error_msg+"</span>")}).fadeIn("slow",function(){t.fn.starratings.update(s,a,i,!1,o)})}})},t.fn.starratings.options={ajaxurl:starratings_config_js.ajaxurl,starsurl:starratings_config_js.starsurl,func:starratings_config_js.func,grs:starratings_config_js.grs,tooltip:starratings_config_js.tooltip,tooltips:starratings_config_js.tooltips,msg:starratings_config_js.msg,fuelspeed:starratings_config_js.fuelspeed,thankyou:starratings_config_js.thankyou,error_msg:starratings_config_js.error_msg}}(jQuery,window,document),jQuery(document).ready(function(t){t(".star-ratings").starratings()});